const v=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))g(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const p of l.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&g(p)}).observe(document,{childList:!0,subtree:!0});function a(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function g(r){if(r.ep)return;r.ep=!0;const l=a(r);fetch(r.href,l)}};v();const d=document.getElementById("canvas"),o=d.getContext("2d"),f=400,u=400,n=20;let h,w=[[0,0],[1,0],[2,0]],i=[...w],s="right",c=!0;document.addEventListener("keydown",e=>{switch(e.key){case"ArrowUp":if(s==="down"||!c)return;s="up",c=!1;break;case"ArrowDown":if(s==="up"||!c)return;s="down",c=!1;break;case"ArrowLeft":if(s==="right"||!c)return;s="left",c=!1;break;case"ArrowRight":if(s==="left"||!c)return;s="right",c=!1;break}});function L(){let e,t=i[i.length-1];switch(s){case"up":{e=[t[0],t[1]-1];break}case"down":{e=[t[0],t[1]+1];break}case"left":{e=[t[0]-1,t[1]];break}case"right":{e=[t[0]+1,t[1]];break}}const a=e[0]<0||e[0]>=f/n||e[1]<0||e[1]>=u/n,g=i.some(([r,l])=>e[0]===r&&e[1]===l);if(a||g){debugger;return P()}if(i.push(e),e[0]===h[0]&&e[1]===h[1]){m();return}i.shift(),c=!0}function y(){let e=100/(i.length-1);for(let t=0;t<i.length;t++){const a=Math.min(100-e*t,90);o.fillStyle=`hsl(0,0%,${a}%)`,o.fillRect(i[t][0]*n,i[t][1]*n,n,n)}}function m(){if(i.length>f*u)return alert("you win");const e=Math.floor(Math.random()*(f/n)),t=Math.floor(Math.random()*(u/n));for(let a=0;a<i.length;a++)if(i[a][0]===e&&i[a][1]===t)return m();h=[e,t]}function b(){o.fillStyle="#ff7875",o.fillRect(h[0]*n,h[1]*n,n,n)}function k(){o.strokeStyle="#bfbfbf";for(let e=0;e<=u/n;e++)o.beginPath(),o.moveTo(0,n*e),o.lineTo(f,n*e),o.stroke();for(let e=0;e<=f/n;e++)o.beginPath(),o.moveTo(n*e,0),o.lineTo(n*e,u),o.stroke()}function A(){d.width=f,d.height=u,k(),y(),b()}function M(){o.clearRect(0,0,d.width,d.height)}function S(){L(),M(),k(),y(),b()}function F(){let e=0;function t(){++e>5&&(S(),e=0),requestAnimationFrame(t)}requestAnimationFrame(t)}function P(){i=[...w],s="right",m()}m();A();F();
